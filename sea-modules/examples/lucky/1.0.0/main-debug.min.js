document.attachEvent&&alert("这个例子不支持 Old IE 哦"),define("examples/lucky/1.0.0/main-debug",["./data-debug","./lucky-debug","jquery-debug","jquery-easing-debug","./user-debug"],function(e){var t=e("./data-debug"),i=e("./lucky-debug");i.init(t)}),define("examples/lucky/1.0.0/data-debug",[],["马云","马化腾","李彦宏","周鸿祎","玉伯","沉鱼","丹侠","贯高","邵帅","陆辉","南伯","崔护","偏右","远尘","臻儿","左宜","张初尘","初成","琼羽","异草","闭月","周爱民","陈皓","winter","army","hax","老赵","sofish","罗龙浩"]),define("examples/lucky/1.0.0/lucky-debug",["jquery-debug","jquery-easing-debug","examples/lucky/1.0.0/user-debug"],function(e,t,i){function s(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function n(e,t){return s(e,t)<=(e.width+t.width)/2}function a(e,t){var i=t.y-e.y,n=t.x-e.x,a=s(e,t),r=Math.ceil(((e.width+t.width)/2-a)/c),l=i>0?Math.ceil(r*i/a):Math.floor(r*i/a),o=n>0?Math.ceil(r*n/a):Math.floor(r*n/a);e.lucky?(t._xMove+=2*o,t._yMove+=2*l):t.lucky?(e._xMove+=-2*o,e._yMove+=-2*l):(e._yMove+=-1*l,t._yMove+=l,e._xMove+=-1*o,t._xMove+=o)}var r=e("jquery-debug");e("jquery-easing-debug");var l=e("examples/lucky/1.0.0/user-debug"),o=100,c=4;i.exports={users:[],init:function(e){r("#container").css("background","none"),this.data=e,this.users=e.map(function(t){return new l(t,e[t])}),this._bindUI()},_bindUI:function(){function e(){"start"===i.getAttribute("data-action")?(i.setAttribute("data-action","stop"),i.innerHTML=i.getAttribute("data-text-stop"),t.start()):(i.setAttribute("data-action","start"),i.innerHTML=i.getAttribute("data-text-start"),t.stop())}var t=this,i=document.querySelector("#go");i.innerHTML=i.getAttribute("data-text-start"),i.addEventListener("click",e,!1),r("#lucky-balls").on("click","li",function(e){var i=r(e.target),s=i.text();t.addItem(s),t.hit(),i.remove()}),r("#balls").on("click","li",function(e){for(var i=r(e.target),s=i.text(),n=0;t.users.length>n;n++){var a=t.users[n];if(a.name===s){t.moveLucky(),t.luckyUser!==a&&t.setLucky(a);break}}}),document.addEventListener("keydown",function(i){"32"==i.keyCode?e():"27"==i.keyCode&&(t.moveLucky(),r("#lucky-balls li").eq(0).click())},!1)},start:function(){this.timer&&clearTimeout(this.timer),this.moveLucky(),this.users.forEach(function(e){e.start()})},stop:function(){var e=this.users,t=0,i=e[0];e.forEach(function(e){e.stop(),e.zIndex>t&&(i=e,t=e.zIndex)}),i.bang(),this.hit(),this.luckyUser=i},removeItem:function(e){for(var t=0;this.users.length>t;t++){var i=this.users[t];i===e&&this.users.splice(t,1)}},addItem:function(e){this.users.push(new l(e))},moveLucky:function(){var e=this.luckyUser;e&&(e.el[0].style.cssText="",e.el.prependTo("#lucky-balls"),this.removeItem(e),this.luckyUser=null)},setLucky:function(e){this.users.forEach(function(e){e.stop()}),this.luckyUser=e,e.bang(),this.hit()},hit:function(){var e=this,t=0,i=this.users;i.forEach(function(e){e.beginHit()});for(var s=0;i.length>s;s++)for(var r=s+1;i.length>r;r++)n(i[s],i[r])&&(a(i[s],i[r]),t++);i.forEach(function(e){e.hitMove()}),t>0&&(this.timer=setTimeout(function(){e.hit()},o))}}}),define("examples/lucky/1.0.0/user-debug",["jquery-debug"],function(e,t,i){function s(e,t){this.name=e,this.options=t||{},this.el=null,this.width=0,this.height=0,this.left=0,this.top=0,this.x=0,this.y=0,this.moving=!1,this.lucky=!1,this.createEl(),this.move()}function n(e,t){return e=e||0,t=t||1,Math.floor(Math.random()*(t-e+1)+e)}var a=e("jquery-debug"),r=500,l=900,o=60,c=60,d=200,u=200,p=100,h=100,f=500,v=500;i.exports=s,s.prototype.createEl=function(){this.el=a("<li>"+this.name+"</li>").appendTo("#balls"),this.width=this.el.width(),this.height=this.el.height()},s.prototype.move=function(e){this.left=n(0,l-this.width),this.top=n(0,r-this.height),this.zIndex=n(0,p),this.reflow(e)},s.prototype.reflow=function(e,t){this.x=this.left+this.width/2,this.y=this.top+this.height/2,this.el[0].style.zIndex=this.zIndex,t?(this.el[0].style.left=this.left,this.el[0].style.top=this.top):this.el.animate({left:this.left,top:this.top},n(h,f),"easeOutBack",e)},s.prototype.start=function(){this.reset(),this.moving=!0,this.autoMove()},s.prototype.reset=function(){this.el.stop(!0,!0),this.lucky=!1,this.el[0].className="",this.el[0].style.width=o+"px",this.el[0].style.height=c+"px",this.width=this.el.width(),this.height=this.el.height(),this._maxTop=r-this.height,this._maxLeft=l-this.width},s.prototype.autoMove=function(){var e=this;this.moving&&this.move(function(){e.autoMove()})},s.prototype.stop=function(){this.el.stop(!0,!0),this.moving=!1},s.prototype.bang=function(){this.lucky=!0,this.el[0].className="selected",this.width=d,this.height=u,this.left=(l-this.width)/2,this.top=(r-this.height)/2,this.el.animate({left:this.left,top:this.top,width:this.width,height:this.height},v)},s.prototype.beginHit=function(){this._xMove=0,this._yMove=0},s.prototype.hitMove=function(){this.left+=this._xMove,this.top+=this._yMove,this.top=0>this.top?0:this.top>this._maxTop?this._maxTop:this.top,this.left=0>this.left?0:this.left>this._maxLeft?this._maxLeft:this.left,this.reflow(null,!1)}});