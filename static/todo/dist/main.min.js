define("examples/todo/1.0.0/main",["backbone","./views/app","$","underscore","./views/todos","./common","./collections/todos","./vendor/backbone.localStorage","./models/todo","./routers/router"],function(e){var t=e("backbone"),n=e("./views/app"),i=e("./routers/router");new i,t.history.start(),new n}),define("examples/todo/1.0.0/views/app",["$","underscore","backbone","examples/todo/1.0.0/views/todos","examples/todo/1.0.0/common","examples/todo/1.0.0/collections/todos","examples/todo/1.0.0/models/todo"],function(e,t,n){var i,r,s,a,o,l=e("$"),c=e("underscore");i=e("backbone"),r=e("examples/todo/1.0.0/views/todos"),s=e("examples/todo/1.0.0/collections/todos"),a=e("examples/todo/1.0.0/common"),o=i.View.extend({el:"#todoapp",statsTemplate:c.template(l("#stats-template").html()),events:{"keypress #new-todo":"createOnEnter","click #clear-completed":"clearCompleted","click #toggle-all":"toggleAllComplete"},initialize:function(){this.allCheckbox=this.$("#toggle-all")[0],this.$input=this.$("#new-todo"),this.$footer=this.$("#footer"),this.$main=this.$("#main"),this.listenTo(s,"add",this.addOne),this.listenTo(s,"reset",this.addAll),this.listenTo(s,"change:completed",this.filterOne),this.listenTo(s,"filter",this.filterAll),this.listenTo(s,"all",this.render),s.fetch()},render:function(){var e=s.completed().length,t=s.remaining().length;s.length?(this.$main.show(),this.$footer.show(),this.$footer.html(this.statsTemplate({completed:e,remaining:t})),this.$("#filters li a").removeClass("selected").filter('[href="#/'+(a.TodoFilter||"")+'"]').addClass("selected")):(this.$main.hide(),this.$footer.hide()),this.allCheckbox.checked=!t},addOne:function(e){var t=new r({model:e});l("#todo-list").append(t.render().el)},addAll:function(){this.$("#todo-list").html(""),s.each(this.addOne,this)},filterOne:function(e){e.trigger("visible")},filterAll:function(){s.each(this.filterOne,this)},newAttributes:function(){return{title:this.$input.val().trim(),order:s.nextOrder(),completed:!1}},createOnEnter:function(e){e.which===a.ENTER_KEY&&this.$input.val().trim()&&(s.create(this.newAttributes()),this.$input.val(""))},clearCompleted:function(){return c.invoke(s.completed(),"destroy"),!1},toggleAllComplete:function(){var e=this.allCheckbox.checked;s.each(function(t){t.save({completed:e})})}}),n.exports=o}),define("examples/todo/1.0.0/views/todos",["backbone","examples/todo/1.0.0/common","$","underscore"],function(e,t,n){var i,r,s;i=e("backbone"),r=e("examples/todo/1.0.0/common");var a=e("$"),o=e("underscore");s=i.View.extend({tagName:"li",template:o.template(a("#item-template").html()),events:{"click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.toggleVisible)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.toggleClass("completed",this.model.get("completed")),this.toggleVisible(),this.$input=this.$(".edit"),this},toggleVisible:function(){this.$el.toggleClass("hidden",this.isHidden())},isHidden:function(){this.model.get("completed")},toggleCompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.$input.focus()},close:function(){var e=this.$input.val().trim();e?this.model.save({title:e}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(e){e.which===r.ENTER_KEY&&this.close()},clear:function(){this.model.destroy()}}),n.exports=s}),define("examples/todo/1.0.0/common",[],{TodoFilter:"",ENTER_KEY:13}),define("examples/todo/1.0.0/collections/todos",["backbone","$","underscore","examples/todo/1.0.0/models/todo"],function(e,t,n){var i,r,s;i=e("backbone"),e("examples/todo/1.0.0/vendor/backbone.localStorage"),e("$"),e("underscore"),r=e("examples/todo/1.0.0/models/todo"),s=i.Collection.extend({model:r,localStorage:new i.LocalStorage("todos-backbone"),completed:function(){return this.filter(function(e){return e.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(e){return e.get("order")}}),n.exports=new s}),define("examples/todo/1.0.0/vendor/backbone.localStorage",["underscore","$","backbone"],function(e){function t(){return(0|65536*(1+Math.random())).toString(16).substring(1)}function n(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var i=e("underscore"),r=e("$"),s=e("backbone");return s.LocalStorage=window.Store=function(e){this.name=e;var t=this.localStorage().getItem(this.name);this.records=t&&t.split(",")||[]},i.extend(s.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=n(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),this.records.push(""+e.id),this.save(),this.find(e)},update:function(e){return this.localStorage().setItem(this.name+"-"+e.id,JSON.stringify(e)),i.include(this.records,""+e.id)||this.records.push(""+e.id),this.save(),this.find(e)},find:function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e.id))},findAll:function(){return i(this.records).chain().map(function(e){return this.jsonData(this.localStorage().getItem(this.name+"-"+e))},this).compact().value()},destroy:function(e){return e.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+e.id),this.records=i.reject(this.records,function(t){return t===""+e.id}),this.save(),e)},localStorage:function(){return localStorage},jsonData:function(e){return e&&JSON.parse(e)}}),s.LocalStorage.sync=window.Store.sync=s.localSync=function(e,t,n){var i,a,o=t.localStorage||t.collection.localStorage,l=r.Deferred&&r.Deferred();try{switch(e){case"read":i=void 0!=t.id?o.find(t):o.findAll();break;case"create":i=o.create(t);break;case"update":i=o.update(t);break;case"delete":i=o.destroy(t)}}catch(c){a=c.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.localStorage.length?"Private browsing is unsupported":c.message}return i?(n&&n.success&&("0.9.10"===s.VERSION?n.success(t,i,n):n.success(i)),l&&l.resolve(i)):(a=a?a:"Record Not Found",n&&n.error&&("0.9.10"===s.VERSION?n.error(t,a,n):n.error(a)),l&&l.reject(a)),n&&n.complete&&n.complete(i),l&&l.promise()},s.ajaxSync=s.sync,s.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?s.localSync:s.ajaxSync},s.sync=function(e,t,n){return s.getSyncMethod(t).apply(this,[e,t,n])},s.LocalStorage}),define("examples/todo/1.0.0/models/todo",["backbone"],function(e,t,n){var i=e("backbone"),r=i.Model.extend({defaults:{title:"",completed:!1},toggle:function(){this.save({completed:!this.get("completed")})}});n.exports=r}),define("examples/todo/1.0.0/routers/router",["backbone","examples/todo/1.0.0/collections/todos","$","underscore","examples/todo/1.0.0/models/todo","examples/todo/1.0.0/common"],function(e,t,n){var i,r,s,a;i=e("backbone"),s=e("examples/todo/1.0.0/collections/todos"),a=e("examples/todo/1.0.0/common"),r=i.Router.extend({routes:{"*filter":"setFilter"},setFilter:function(e){a.TodoFilter=e&&e.trim()||"",s.trigger("filter")}}),n.exports=r});